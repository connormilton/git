2025-04-13 15:39:36,847 - TradingBot - INFO - ----- Logging configured for TradingBot (Level: INFO) -----
2025-04-13 15:39:36,847 - TradingBot - INFO - ðŸš€ Initializing Enhanced Forex AI Trader PID: 26116
2025-04-13 15:39:36,848 - TradingBot - INFO - Connecting to IG as connormilton (LIVE)...
2025-04-13 15:39:37,082 - TradingBot - INFO - Setting default IG account ID: INRKZ
2025-04-13 15:39:37,179 - TradingBot - INFO - Account already active, continuing without switching.
2025-04-13 15:39:37,180 - TradingBot - INFO - IG connection successful.
2025-04-13 15:39:37,206 - TradingBot - INFO - Trade memory database initialized at data/trading_memory.db
2025-04-13 15:39:37,207 - TradingBot - INFO - Created trade log file: data/trade_history.csv
2025-04-13 15:39:37,208 - TradingBot - INFO - OpenAI setup completed.
2025-04-13 15:39:37,211 - TradingBot - INFO - Initialized decision review file: data/decisions\decision_reviews.csv
2025-04-13 15:39:37,539 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 15:39:37,539 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 15:39:37,540 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 15:39:37,541 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 15:39:37,541 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 15:39:37,541 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 15:39:37,541 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 15:39:37,542 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 15:39:37,542 - TradingBot - INFO - --- Trading Cycle 2025-04-13T14:39:37+00:00 ---
2025-04-13 15:39:37,850 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 15:39:37,851 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 15:39:37,852 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 15:39:37,852 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 15:39:37,852 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 15:39:37,852 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 15:39:37,852 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 15:39:37,853 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 15:39:37,856 - TradingBot - INFO - Selected 0 pairs for analysis:
2025-04-13 15:39:37,856 - TradingBot - ERROR - No valid pairs selected. Stopping.
2025-04-13 15:39:37,858 - TradingBot - INFO - Trade memory database connection closed.
2025-04-13 15:39:37,858 - TradingBot - INFO - Trading bot shutdown complete.
2025-04-13 15:55:48,924 - TradingBot - INFO - ----- Logging configured for TradingBot (Level: INFO) -----
2025-04-13 15:55:48,924 - TradingBot - INFO - ðŸš€ Initializing Enhanced Forex AI Trader PID: 19812
2025-04-13 15:55:48,925 - TradingBot - INFO - Connecting to IG as connormilton (LIVE)...
2025-04-13 15:55:49,218 - TradingBot - INFO - Setting default IG account ID: INRKZ
2025-04-13 15:55:49,296 - TradingBot - INFO - Account already active, continuing without switching.
2025-04-13 15:55:49,296 - TradingBot - INFO - IG connection successful.
2025-04-13 15:55:49,296 - TradingBot - INFO - Initializing Polygon client with key starting with: KzYM...
2025-04-13 15:55:49,297 - TradingBot - ERROR - Failed to initialize Polygon.io client: RESTClient.__init__() got an unexpected keyword argument 'timeout'
2025-04-13 15:55:49,299 - TradingBot - INFO - Trade memory database initialized at data/trading_memory.db
2025-04-13 15:55:49,301 - TradingBot - INFO - OpenAI setup completed.
2025-04-13 15:55:49,793 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 15:55:49,793 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 15:55:49,794 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 15:55:49,794 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 15:55:49,794 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 15:55:49,794 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 15:55:49,794 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 15:55:49,795 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 15:55:49,795 - TradingBot - INFO - --- Trading Cycle 2025-04-13T14:55:49+00:00 ---
2025-04-13 15:55:50,086 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 15:55:50,086 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 15:55:50,087 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 15:55:50,087 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 15:55:50,087 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 15:55:50,087 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 15:55:50,087 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 15:55:50,088 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 15:55:50,088 - TradingBot - INFO - Starting pair selection process...
2025-04-13 15:55:50,088 - TradingBot - INFO - DEBUGGING: Found 11 available pairs in config:
2025-04-13 15:55:50,089 - TradingBot - INFO -   - CS.D.EURUSD.MINI.IP: {'description': 'Euro/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 15:55:50,089 - TradingBot - INFO -   - CS.D.USDJPY.MINI.IP: {'description': 'US Dollar/Japanese Yen', 'category': 'forex', 'group': 'majors'}
2025-04-13 15:55:50,089 - TradingBot - INFO -   - CS.D.GBPUSD.MINI.IP: {'description': 'British Pound/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 15:55:50,089 - TradingBot - INFO -   - CS.D.AUDUSD.MINI.IP: {'description': 'Australian Dollar/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 15:55:50,089 - TradingBot - INFO -   - CS.D.USDCAD.MINI.IP: {'description': 'US Dollar/Canadian Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 15:55:50,089 - TradingBot - INFO -   - ... and 6 more
2025-04-13 15:55:50,089 - TradingBot - INFO - DEBUGGING: Current UTC hour is 14
2025-04-13 15:55:50,089 - TradingBot - INFO - DEBUGGING: Found 3 trading sessions in config:
2025-04-13 15:55:50,089 - TradingBot - INFO -   - ASIAN: Hours 0-8, Active: False, Pairs: 3
2025-04-13 15:55:50,090 - TradingBot - INFO -     Sample pairs: CS.D.USDJPY.MINI.IP, CS.D.AUDJPY.MINI.IP, CS.D.EURJPY.MINI.IP
2025-04-13 15:55:50,090 - TradingBot - INFO -   - EUROPEAN: Hours 7-16, Active: True, Pairs: 4
2025-04-13 15:55:50,090 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.EURGBP.MINI.IP
2025-04-13 15:55:50,090 - TradingBot - INFO -   - AMERICAN: Hours 12-21, Active: True, Pairs: 3
2025-04-13 15:55:50,090 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.USDCAD.MINI.IP
2025-04-13 15:55:50,090 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,090 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:50,090 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,090 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 15:55:50,091 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,091 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:50,091 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,091 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:50,091 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,092 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 15:55:50,092 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,093 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:50,093 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,093 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 15:55:50,094 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,094 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:50,094 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,095 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:50,095 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,095 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 15:55:50,095 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,095 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:50,096 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,096 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 15:55:50,096 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,096 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:50,096 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,096 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:50,097 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,097 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 15:55:50,097 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,097 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,097 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,097 - TradingBot - INFO - Selected 5 pairs for analysis:
2025-04-13 15:55:50,097 - TradingBot - INFO -   CS.D.GBPUSD.MINI.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 15:55:50,098 - TradingBot - INFO -   IX.D.FTSE.DAILY.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 15:55:50,098 - TradingBot - INFO -   CS.D.USDCAD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 15:55:50,098 - TradingBot - INFO -   CS.D.EURUSD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 15:55:50,098 - TradingBot - INFO -   CS.D.EURGBP.MINI.IP: Score=0.25, Setup=0.00, Trend=0.50, Perf=0.50, Vol=0.50
2025-04-13 15:55:50,827 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:50,828 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:51,607 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:51,610 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 15:55:52,437 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:52,439 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:53,303 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:53,305 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:54,106 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,108 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 15:55:54,211 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,213 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 15:55:54,234 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,236 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:54,238 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,239 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:54,241 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,243 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 15:55:54,245 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,246 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 15:55:54,248 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,249 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:54,251 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,253 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:54,254 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,256 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:54,258 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,260 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 15:55:54,260 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,260 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 15:55:54,261 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,263 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 15:55:54,264 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,266 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,268 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,269 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,271 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,273 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,275 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,277 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,278 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,280 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,282 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,283 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,285 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,287 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,288 - TradingBot - ERROR - Polygon client not available.
2025-04-13 15:55:54,293 - TradingBot - ERROR - Prompt template 'llm_prompts\advanced_trade_analysis.txt' not found.
2025-04-13 15:55:54,295 - TradingBot - ERROR - Missing key in prompt template: \n          "tradeActions"
2025-04-13 15:55:54,296 - TradingBot - CRITICAL - Unhandled exception in main loop!
Traceback (most recent call last):
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 425, in generate_advanced_prompt
    prompt = template.format(**context_data)
KeyError: '\n          "tradeActions"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\temp\claude\git\main.py", line 343, in run_trading_bot
    advanced_prompt, market_regime = llm_prompting.generate_advanced_prompt(
                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        portfolio, valid_snapshots, data_provider, risk_manager
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 430, in generate_advanced_prompt
    prompt = self._generate_generic_template().format(**context_data)
KeyError: '\n          "tradeActions"'
2025-04-13 15:55:54,324 - TradingBot - ERROR - Error: '\n          "tradeActions"'
2025-04-13 15:55:54,325 - TradingBot - ERROR - Pausing 30s before retry.
2025-04-13 15:56:24,327 - TradingBot - INFO - Cycle ended (Duration: 34.53s). Sleeping 145.47s...
2025-04-13 16:36:45,696 - TradingBot - INFO - ----- Logging configured for TradingBot (Level: INFO) -----
2025-04-13 16:36:45,697 - TradingBot - INFO - ðŸš€ Initializing Enhanced Forex AI Trader PID: 46172
2025-04-13 16:36:45,697 - TradingBot - INFO - Connecting to IG as connormilton (LIVE)...
2025-04-13 16:36:45,998 - TradingBot - INFO - Setting default IG account ID: INRKZ
2025-04-13 16:36:46,099 - TradingBot - INFO - Account already active, continuing without switching.
2025-04-13 16:36:46,100 - TradingBot - INFO - IG connection successful.
2025-04-13 16:36:46,100 - TradingBot - INFO - Initializing Polygon client with key starting with: KzYK...
2025-04-13 16:36:46,100 - TradingBot - ERROR - Failed to initialize Polygon.io client: RESTClient.__init__() got an unexpected keyword argument 'timeout'
2025-04-13 16:36:46,103 - TradingBot - INFO - Trade memory database initialized at data/trading_memory.db
2025-04-13 16:36:46,104 - TradingBot - INFO - OpenAI setup completed.
2025-04-13 16:36:46,404 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 16:36:46,404 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 16:36:46,405 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 16:36:46,405 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 16:36:46,406 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 16:36:46,406 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 16:36:46,406 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 16:36:46,407 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 16:36:46,407 - TradingBot - INFO - --- Trading Cycle 2025-04-13T15:36:46+00:00 ---
2025-04-13 16:36:46,660 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 16:36:46,660 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 16:36:46,660 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 16:36:46,660 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 16:36:46,661 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 16:36:46,661 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 16:36:46,661 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 16:36:46,661 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 16:36:46,661 - TradingBot - INFO - Starting pair selection process...
2025-04-13 16:36:46,661 - TradingBot - INFO - DEBUGGING: Found 11 available pairs in config:
2025-04-13 16:36:46,662 - TradingBot - INFO -   - CS.D.EURUSD.MINI.IP: {'description': 'Euro/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:36:46,662 - TradingBot - INFO -   - CS.D.USDJPY.MINI.IP: {'description': 'US Dollar/Japanese Yen', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:36:46,662 - TradingBot - INFO -   - CS.D.GBPUSD.MINI.IP: {'description': 'British Pound/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:36:46,662 - TradingBot - INFO -   - CS.D.AUDUSD.MINI.IP: {'description': 'Australian Dollar/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:36:46,662 - TradingBot - INFO -   - CS.D.USDCAD.MINI.IP: {'description': 'US Dollar/Canadian Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:36:46,662 - TradingBot - INFO -   - ... and 6 more
2025-04-13 16:36:46,662 - TradingBot - INFO - DEBUGGING: Current UTC hour is 15
2025-04-13 16:36:46,662 - TradingBot - INFO - DEBUGGING: Found 3 trading sessions in config:
2025-04-13 16:36:46,662 - TradingBot - INFO -   - ASIAN: Hours 0-8, Active: False, Pairs: 3
2025-04-13 16:36:46,662 - TradingBot - INFO -     Sample pairs: CS.D.USDJPY.MINI.IP, CS.D.AUDJPY.MINI.IP, CS.D.EURJPY.MINI.IP
2025-04-13 16:36:46,662 - TradingBot - INFO -   - EUROPEAN: Hours 7-16, Active: True, Pairs: 4
2025-04-13 16:36:46,662 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.EURGBP.MINI.IP
2025-04-13 16:36:46,662 - TradingBot - INFO -   - AMERICAN: Hours 12-21, Active: True, Pairs: 3
2025-04-13 16:36:46,662 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.USDCAD.MINI.IP
2025-04-13 16:36:46,663 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,663 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:46,663 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,663 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:46,663 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,663 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:36:46,663 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,664 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:46,664 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,664 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:36:46,665 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,665 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:46,665 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,665 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:46,665 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,666 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:36:46,666 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,666 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:46,666 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,666 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:36:46,666 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,666 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:46,667 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,667 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:46,667 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,667 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:36:46,668 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,668 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:46,668 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,668 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:36:46,668 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,668 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,668 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:46,669 - TradingBot - INFO - Selected 5 pairs for analysis:
2025-04-13 16:36:46,669 - TradingBot - INFO -   CS.D.GBPUSD.MINI.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 16:36:46,669 - TradingBot - INFO -   IX.D.FTSE.DAILY.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 16:36:46,669 - TradingBot - INFO -   CS.D.USDCAD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 16:36:46,669 - TradingBot - INFO -   CS.D.EURUSD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 16:36:46,669 - TradingBot - INFO -   CS.D.EURGBP.MINI.IP: Score=0.25, Setup=0.00, Trend=0.50, Perf=0.50, Vol=0.50
2025-04-13 16:36:47,355 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:47,358 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:48,155 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:48,157 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:36:48,949 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:48,951 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:49,732 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:49,734 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:50,515 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,519 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:36:50,622 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,624 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:36:50,647 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,648 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:50,650 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,652 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:50,653 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,655 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:36:50,657 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,659 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:36:50,660 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,662 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:50,663 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,665 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:50,667 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,668 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:50,670 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,672 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:36:50,674 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,675 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:36:50,677 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,679 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:36:50,680 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,682 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,684 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,686 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,688 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,689 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,691 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,693 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,694 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,696 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,698 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,699 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,702 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,703 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,705 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:36:50,709 - TradingBot - ERROR - Prompt template 'llm_prompts\advanced_trade_analysis.txt' not found.
2025-04-13 16:36:50,711 - TradingBot - ERROR - Missing key in prompt template: \n          "tradeActions"
2025-04-13 16:36:50,712 - TradingBot - CRITICAL - Unhandled exception in main loop!
Traceback (most recent call last):
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 425, in generate_advanced_prompt
    prompt = template.format(**context_data)
KeyError: '\n          "tradeActions"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\temp\claude\git\main.py", line 343, in run_trading_bot
    advanced_prompt, market_regime = llm_prompting.generate_advanced_prompt(
                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        portfolio, valid_snapshots, data_provider, risk_manager
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 430, in generate_advanced_prompt
    prompt = self._generate_generic_template().format(**context_data)
KeyError: '\n          "tradeActions"'
2025-04-13 16:36:50,739 - TradingBot - ERROR - Error: '\n          "tradeActions"'
2025-04-13 16:36:50,740 - TradingBot - ERROR - Pausing 30s before retry.
2025-04-13 16:37:20,741 - TradingBot - INFO - Cycle ended (Duration: 34.33s). Sleeping 145.67s...
2025-04-13 16:42:41,543 - TradingBot - INFO - ----- Logging configured for TradingBot (Level: INFO) -----
2025-04-13 16:42:41,544 - TradingBot - INFO - ðŸš€ Initializing Enhanced Forex AI Trader PID: 27188
2025-04-13 16:42:41,544 - TradingBot - INFO - Connecting to IG as connormilton (LIVE)...
2025-04-13 16:42:41,772 - TradingBot - INFO - Setting default IG account ID: INRKZ
2025-04-13 16:42:41,848 - TradingBot - INFO - Account already active, continuing without switching.
2025-04-13 16:42:41,849 - TradingBot - INFO - IG connection successful.
2025-04-13 16:42:41,849 - TradingBot - INFO - Initializing Polygon client with key starting with: 1O0r...
2025-04-13 16:42:41,849 - TradingBot - ERROR - Failed to initialize Polygon.io client: RESTClient.__init__() got an unexpected keyword argument 'timeout'
2025-04-13 16:42:41,852 - TradingBot - INFO - Trade memory database initialized at data/trading_memory.db
2025-04-13 16:42:41,854 - TradingBot - INFO - OpenAI setup completed.
2025-04-13 16:42:42,144 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 16:42:42,144 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 16:42:42,144 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 16:42:42,145 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 16:42:42,145 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 16:42:42,145 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 16:42:42,145 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 16:42:42,146 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 16:42:42,146 - TradingBot - INFO - --- Trading Cycle 2025-04-13T15:42:42+00:00 ---
2025-04-13 16:42:42,414 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 16:42:42,415 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 16:42:42,415 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 16:42:42,416 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 16:42:42,416 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 16:42:42,416 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 16:42:42,416 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 16:42:42,416 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 16:42:42,417 - TradingBot - INFO - Starting pair selection process...
2025-04-13 16:42:42,417 - TradingBot - INFO - DEBUGGING: Found 11 available pairs in config:
2025-04-13 16:42:42,417 - TradingBot - INFO -   - CS.D.EURUSD.MINI.IP: {'description': 'Euro/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:42:42,417 - TradingBot - INFO -   - CS.D.USDJPY.MINI.IP: {'description': 'US Dollar/Japanese Yen', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:42:42,417 - TradingBot - INFO -   - CS.D.GBPUSD.MINI.IP: {'description': 'British Pound/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:42:42,417 - TradingBot - INFO -   - CS.D.AUDUSD.MINI.IP: {'description': 'Australian Dollar/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:42:42,417 - TradingBot - INFO -   - CS.D.USDCAD.MINI.IP: {'description': 'US Dollar/Canadian Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:42:42,417 - TradingBot - INFO -   - ... and 6 more
2025-04-13 16:42:42,417 - TradingBot - INFO - DEBUGGING: Current UTC hour is 15
2025-04-13 16:42:42,417 - TradingBot - INFO - DEBUGGING: Found 3 trading sessions in config:
2025-04-13 16:42:42,417 - TradingBot - INFO -   - ASIAN: Hours 0-8, Active: False, Pairs: 3
2025-04-13 16:42:42,417 - TradingBot - INFO -     Sample pairs: CS.D.USDJPY.MINI.IP, CS.D.AUDJPY.MINI.IP, CS.D.EURJPY.MINI.IP
2025-04-13 16:42:42,417 - TradingBot - INFO -   - EUROPEAN: Hours 7-16, Active: True, Pairs: 4
2025-04-13 16:42:42,417 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.EURGBP.MINI.IP
2025-04-13 16:42:42,417 - TradingBot - INFO -   - AMERICAN: Hours 12-21, Active: True, Pairs: 3
2025-04-13 16:42:42,417 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.USDCAD.MINI.IP
2025-04-13 16:42:42,418 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,418 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:42,418 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,418 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:42:42,418 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,419 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:42,419 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,419 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:42:42,419 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,419 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:42,420 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,420 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:42,421 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,421 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:42:42,421 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,421 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:42,421 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,421 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:42:42,421 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,422 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:42,422 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,422 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:42,422 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,422 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:42:42,422 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,422 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:42,422 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,423 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:42:42,423 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,423 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:42,423 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,423 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,423 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:42,423 - TradingBot - INFO - Selected 5 pairs for analysis:
2025-04-13 16:42:42,423 - TradingBot - INFO -   IX.D.FTSE.DAILY.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 16:42:42,423 - TradingBot - INFO -   CS.D.GBPUSD.MINI.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 16:42:42,423 - TradingBot - INFO -   CS.D.USDCAD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 16:42:42,423 - TradingBot - INFO -   CS.D.EURUSD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 16:42:42,424 - TradingBot - INFO -   CS.D.EURGBP.MINI.IP: Score=0.25, Setup=0.00, Trend=0.50, Perf=0.50, Vol=0.50
2025-04-13 16:42:43,107 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:43,109 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:42:43,896 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:43,899 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:44,713 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:44,715 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:45,513 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:45,515 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:46,305 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,307 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:42:46,410 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,412 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:42:46,435 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,437 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:42:46,438 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,440 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:42:46,442 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,444 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:46,445 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,447 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:46,448 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,450 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:46,452 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,453 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:46,455 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,457 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:46,459 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,461 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:42:46,462 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,464 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:42:46,466 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,467 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:42:46,469 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,471 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,472 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,474 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,476 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,477 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,479 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,481 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,482 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,484 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,486 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,487 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,489 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,491 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,492 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:42:46,497 - TradingBot - ERROR - Prompt template 'llm_prompts\advanced_trade_analysis.txt' not found.
2025-04-13 16:42:46,499 - TradingBot - ERROR - Missing key in prompt template: \n          "tradeActions"
2025-04-13 16:42:46,500 - TradingBot - CRITICAL - Unhandled exception in main loop!
Traceback (most recent call last):
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 425, in generate_advanced_prompt
    prompt = template.format(**context_data)
KeyError: '\n          "tradeActions"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\temp\claude\git\main.py", line 343, in run_trading_bot
    advanced_prompt, market_regime = llm_prompting.generate_advanced_prompt(
                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        portfolio, valid_snapshots, data_provider, risk_manager
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 430, in generate_advanced_prompt
    prompt = self._generate_generic_template().format(**context_data)
KeyError: '\n          "tradeActions"'
2025-04-13 16:42:46,527 - TradingBot - ERROR - Error: '\n          "tradeActions"'
2025-04-13 16:42:46,528 - TradingBot - ERROR - Pausing 30s before retry.
2025-04-13 16:43:16,529 - TradingBot - INFO - Cycle ended (Duration: 34.38s). Sleeping 145.62s...
2025-04-13 16:45:42,151 - TradingBot - INFO - --- Trading Cycle 2025-04-13T15:45:42+00:00 ---
2025-04-13 16:45:42,397 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 16:45:42,398 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 16:45:42,398 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 16:45:42,398 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 16:45:42,399 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 16:45:42,399 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 16:45:42,400 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 16:45:42,401 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 16:45:42,402 - TradingBot - INFO - Starting pair selection process...
2025-04-13 16:45:42,402 - TradingBot - INFO - DEBUGGING: Found 11 available pairs in config:
2025-04-13 16:45:42,402 - TradingBot - INFO -   - CS.D.EURUSD.MINI.IP: {'description': 'Euro/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:45:42,402 - TradingBot - INFO -   - CS.D.USDJPY.MINI.IP: {'description': 'US Dollar/Japanese Yen', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:45:42,402 - TradingBot - INFO -   - CS.D.GBPUSD.MINI.IP: {'description': 'British Pound/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:45:42,403 - TradingBot - INFO -   - CS.D.AUDUSD.MINI.IP: {'description': 'Australian Dollar/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:45:42,403 - TradingBot - INFO -   - CS.D.USDCAD.MINI.IP: {'description': 'US Dollar/Canadian Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:45:42,403 - TradingBot - INFO -   - ... and 6 more
2025-04-13 16:45:42,403 - TradingBot - INFO - DEBUGGING: Current UTC hour is 15
2025-04-13 16:45:42,403 - TradingBot - INFO - DEBUGGING: Found 3 trading sessions in config:
2025-04-13 16:45:42,403 - TradingBot - INFO -   - ASIAN: Hours 0-8, Active: False, Pairs: 3
2025-04-13 16:45:42,404 - TradingBot - INFO -     Sample pairs: CS.D.USDJPY.MINI.IP, CS.D.AUDJPY.MINI.IP, CS.D.EURJPY.MINI.IP
2025-04-13 16:45:42,404 - TradingBot - INFO -   - EUROPEAN: Hours 7-16, Active: True, Pairs: 4
2025-04-13 16:45:42,404 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.EURGBP.MINI.IP
2025-04-13 16:45:42,404 - TradingBot - INFO -   - AMERICAN: Hours 12-21, Active: True, Pairs: 3
2025-04-13 16:45:42,404 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.USDCAD.MINI.IP
2025-04-13 16:45:42,405 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,405 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:42,406 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,406 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:45:42,406 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,407 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:42,407 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,407 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:45:42,409 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,409 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:42,409 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,410 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:42,410 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,410 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:45:42,410 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,411 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:42,411 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,411 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:45:42,411 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,412 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:42,412 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,412 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:42,413 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,413 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:45:42,413 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,414 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:42,414 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,414 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:45:42,414 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,415 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:42,415 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,415 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,416 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:42,416 - TradingBot - INFO - Selected 5 pairs for analysis:
2025-04-13 16:45:42,416 - TradingBot - INFO -   IX.D.FTSE.DAILY.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 16:45:42,416 - TradingBot - INFO -   CS.D.GBPUSD.MINI.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 16:45:42,416 - TradingBot - INFO -   CS.D.USDCAD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 16:45:42,417 - TradingBot - INFO -   CS.D.EURUSD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 16:45:42,417 - TradingBot - INFO -   CS.D.EURGBP.MINI.IP: Score=0.25, Setup=0.00, Trend=0.50, Perf=0.50, Vol=0.50
2025-04-13 16:45:43,074 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:43,076 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:45:43,849 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:43,850 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:44,709 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:44,711 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:45,478 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:45,478 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:46,247 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,248 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:45:46,350 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,353 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:45:46,369 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,371 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:45:46,373 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,375 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:45:46,377 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,379 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:46,380 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,382 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:46,384 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,385 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:46,386 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,388 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:46,389 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,391 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:46,393 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,394 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:45:46,396 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,397 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:45:46,399 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,401 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:45:46,402 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,404 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,406 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,408 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,409 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,411 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,413 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,414 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,416 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,418 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,419 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,421 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,423 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,424 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,425 - TradingBot - ERROR - Polygon client not available.
2025-04-13 16:45:46,428 - TradingBot - ERROR - Prompt template 'llm_prompts\advanced_trade_analysis.txt' not found.
2025-04-13 16:45:46,429 - TradingBot - ERROR - Missing key in prompt template: \n          "tradeActions"
2025-04-13 16:45:46,430 - TradingBot - CRITICAL - Unhandled exception in main loop!
Traceback (most recent call last):
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 425, in generate_advanced_prompt
    prompt = template.format(**context_data)
KeyError: '\n          "tradeActions"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\temp\claude\git\main.py", line 343, in run_trading_bot
    advanced_prompt, market_regime = llm_prompting.generate_advanced_prompt(
                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        portfolio, valid_snapshots, data_provider, risk_manager
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 430, in generate_advanced_prompt
    prompt = self._generate_generic_template().format(**context_data)
KeyError: '\n          "tradeActions"'
2025-04-13 16:45:46,442 - TradingBot - ERROR - Error: '\n          "tradeActions"'
2025-04-13 16:45:46,442 - TradingBot - ERROR - Pausing 30s before retry.
2025-04-13 16:46:16,444 - TradingBot - INFO - Cycle ended (Duration: 34.30s). Sleeping 145.70s...
2025-04-13 16:47:16,051 - TradingBot - INFO - ----- Logging configured for TradingBot (Level: INFO) -----
2025-04-13 16:47:16,051 - TradingBot - INFO - ðŸš€ Initializing Enhanced Forex AI Trader PID: 8788
2025-04-13 16:47:16,052 - TradingBot - INFO - Connecting to IG as connormilton (LIVE)...
2025-04-13 16:47:16,269 - TradingBot - INFO - Setting default IG account ID: INRKZ
2025-04-13 16:47:16,360 - TradingBot - INFO - Account already active, continuing without switching.
2025-04-13 16:47:16,361 - TradingBot - INFO - IG connection successful.
2025-04-13 16:47:16,361 - TradingBot - INFO - Initializing Polygon client with key starting with: 1O0r...
2025-04-13 16:47:16,362 - TradingBot - INFO - Polygon.io client initialized successfully
2025-04-13 16:47:16,997 - TradingBot - INFO - Polygon connection test successful. Got quote for C:EURUSD: Ask=1.13642, Bid=1.13492
2025-04-13 16:47:16,998 - TradingBot - INFO - Trade memory database initialized at data/trading_memory.db
2025-04-13 16:47:16,999 - TradingBot - INFO - OpenAI setup completed.
2025-04-13 16:47:17,266 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 16:47:17,266 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 16:47:17,266 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 16:47:17,267 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 16:47:17,267 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 16:47:17,267 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 16:47:17,267 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 16:47:17,268 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 16:47:17,268 - TradingBot - INFO - --- Trading Cycle 2025-04-13T15:47:17+00:00 ---
2025-04-13 16:47:17,488 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 16:47:17,488 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 16:47:17,489 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 16:47:17,489 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 16:47:17,489 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 16:47:17,490 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 16:47:17,490 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 16:47:17,490 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 16:47:17,490 - TradingBot - INFO - Starting pair selection process...
2025-04-13 16:47:17,490 - TradingBot - INFO - DEBUGGING: Found 11 available pairs in config:
2025-04-13 16:47:17,490 - TradingBot - INFO -   - CS.D.EURUSD.MINI.IP: {'description': 'Euro/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:47:17,490 - TradingBot - INFO -   - CS.D.USDJPY.MINI.IP: {'description': 'US Dollar/Japanese Yen', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:47:17,490 - TradingBot - INFO -   - CS.D.GBPUSD.MINI.IP: {'description': 'British Pound/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:47:17,490 - TradingBot - INFO -   - CS.D.AUDUSD.MINI.IP: {'description': 'Australian Dollar/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:47:17,490 - TradingBot - INFO -   - CS.D.USDCAD.MINI.IP: {'description': 'US Dollar/Canadian Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:47:17,490 - TradingBot - INFO -   - ... and 6 more
2025-04-13 16:47:17,490 - TradingBot - INFO - DEBUGGING: Current UTC hour is 15
2025-04-13 16:47:17,490 - TradingBot - INFO - DEBUGGING: Found 3 trading sessions in config:
2025-04-13 16:47:17,491 - TradingBot - INFO -   - ASIAN: Hours 0-8, Active: False, Pairs: 3
2025-04-13 16:47:17,491 - TradingBot - INFO -     Sample pairs: CS.D.USDJPY.MINI.IP, CS.D.AUDJPY.MINI.IP, CS.D.EURJPY.MINI.IP
2025-04-13 16:47:17,491 - TradingBot - INFO -   - EUROPEAN: Hours 7-16, Active: True, Pairs: 4
2025-04-13 16:47:17,491 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.EURGBP.MINI.IP
2025-04-13 16:47:17,491 - TradingBot - INFO -   - AMERICAN: Hours 12-21, Active: True, Pairs: 3
2025-04-13 16:47:17,491 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.USDCAD.MINI.IP
2025-04-13 16:47:17,491 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:17,491 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:17,821 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:17,876 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:18,005 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:18,005 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:47:18,006 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:47:18,006 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:47:18,006 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:47:18,006 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:18,193 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:18,611 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:18,612 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:18,613 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:18,614 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:19,303 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:19,306 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:19,442 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:19,444 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:19,445 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:19,675 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:19,820 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:19,821 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:19,824 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:19,825 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:20,044 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:20,047 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:20,195 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:20,196 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:47:20,198 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:47:20,198 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:47:20,199 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:47:20,200 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:20,413 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:20,569 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:20,572 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:20,573 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:20,573 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:20,793 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:20,795 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:20,951 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:20,953 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:20,954 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:21,178 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:21,396 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:21,398 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:21,399 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:21,399 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:21,624 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:21,626 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:21,997 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:21,999 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:47:22,000 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:47:22,001 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:47:22,002 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:47:22,003 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:22,221 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:22,370 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:22,372 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:22,373 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:22,374 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:22,605 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:22,607 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:22,742 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:22,744 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:22,746 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:22,961 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:23,095 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:23,096 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:23,097 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:47:23,098 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:47:23,099 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:23,307 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:23,448 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:23,450 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:23,451 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:23,643 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:23,646 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:23,767 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:23,770 - TradingBot - INFO - Selected 5 pairs for analysis:
2025-04-13 16:47:23,770 - TradingBot - INFO -   IX.D.FTSE.DAILY.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 16:47:23,771 - TradingBot - INFO -   CS.D.GBPUSD.MINI.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 16:47:23,771 - TradingBot - INFO -   CS.D.USDCAD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 16:47:23,772 - TradingBot - INFO -   CS.D.EURUSD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 16:47:23,772 - TradingBot - INFO -   CS.D.EURGBP.MINI.IP: Score=0.25, Setup=0.00, Trend=0.50, Perf=0.50, Vol=0.50
2025-04-13 16:47:25,021 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:47:25,023 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:47:25,024 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:47:25,817 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:26,012 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:26,213 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:26,214 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:27,023 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:27,024 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:27,389 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:27,392 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:27,552 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:27,553 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:28,329 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:28,732 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:28,946 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:28,948 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:29,709 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:29,710 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:29,954 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:29,957 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:30,136 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:30,137 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:47:30,239 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:47:30,240 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:47:30,241 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:47:30,251 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:47:30,252 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:47:30,252 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:47:30,254 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:47:30,255 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:47:30,256 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:47:30,258 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:30,502 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:30,666 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:30,668 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:30,669 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:30,909 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:31,274 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:31,276 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:31,278 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:31,278 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:31,499 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:31,502 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:31,658 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:31,660 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:31,661 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:31,662 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:31,882 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:31,884 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:32,025 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:32,026 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:32,027 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:32,244 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:32,386 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:32,387 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:32,389 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:32,904 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:33,051 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:33,053 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:47:33,054 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:33,055 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:33,268 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:33,270 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:33,437 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:33,440 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:47:33,440 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:33,441 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:47:33,643 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:33,645 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:33,781 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:33,783 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:47:33,784 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:47:33,784 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:47:33,785 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:47:33,785 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:47:33,786 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:47:33,786 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:47:33,787 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 16:47:34,172 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:34,306 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:34,307 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 16:47:34,488 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:34,629 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:34,631 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 16:47:34,811 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:34,952 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:34,954 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:34,955 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 16:47:35,121 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:35,124 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:35,266 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:35,267 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:35,267 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 16:47:35,458 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:35,461 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:35,599 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:35,601 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:35,601 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 16:47:35,781 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:35,783 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:47:35,908 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:35,910 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 16:47:36,265 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:36,391 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:36,392 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 16:47:36,597 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:36,738 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:36,739 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 16:47:36,922 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:37,064 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:37,066 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:37,067 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 16:47:37,235 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:37,237 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:37,378 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:37,380 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:37,380 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 16:47:37,584 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:37,588 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:37,733 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:37,734 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:37,735 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 16:47:37,925 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:47:37,927 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:47:38,067 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:47:38,070 - TradingBot - ERROR - Prompt template 'llm_prompts\advanced_trade_analysis.txt' not found.
2025-04-13 16:47:38,071 - TradingBot - ERROR - Missing key in prompt template: \n          "tradeActions"
2025-04-13 16:47:38,071 - TradingBot - CRITICAL - Unhandled exception in main loop!
Traceback (most recent call last):
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 425, in generate_advanced_prompt
    prompt = template.format(**context_data)
KeyError: '\n          "tradeActions"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\temp\claude\git\main.py", line 343, in run_trading_bot
    advanced_prompt, market_regime = llm_prompting.generate_advanced_prompt(
                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        portfolio, valid_snapshots, data_provider, risk_manager
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 430, in generate_advanced_prompt
    prompt = self._generate_generic_template().format(**context_data)
KeyError: '\n          "tradeActions"'
2025-04-13 16:47:38,081 - TradingBot - ERROR - Error: '\n          "tradeActions"'
2025-04-13 16:47:38,081 - TradingBot - ERROR - Pausing 30s before retry.
2025-04-13 16:54:35,497 - TradingBot - INFO - ----- Logging configured for TradingBot (Level: INFO) -----
2025-04-13 16:54:35,497 - TradingBot - INFO - ðŸš€ Initializing Enhanced Forex AI Trader PID: 38572
2025-04-13 16:54:35,498 - TradingBot - INFO - Connecting to IG as connormilton (LIVE)...
2025-04-13 16:54:35,806 - TradingBot - INFO - Setting default IG account ID: INRKZ
2025-04-13 16:54:35,901 - TradingBot - INFO - Account already active, continuing without switching.
2025-04-13 16:54:35,902 - TradingBot - INFO - IG connection successful.
2025-04-13 16:54:35,903 - TradingBot - INFO - Initializing Polygon client with key starting with: 1O0r...
2025-04-13 16:54:35,903 - TradingBot - INFO - Polygon.io client initialized successfully
2025-04-13 16:54:36,450 - TradingBot - INFO - Polygon connection test successful. Got quote for C:EURUSD: Ask=1.13642, Bid=1.13492
2025-04-13 16:54:36,454 - TradingBot - INFO - Trade memory database initialized at data/trading_memory.db
2025-04-13 16:54:36,456 - TradingBot - INFO - OpenAI setup completed.
2025-04-13 16:54:36,846 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 16:54:36,846 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 16:54:36,847 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 16:54:36,847 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 16:54:36,847 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 16:54:36,847 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 16:54:36,848 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 16:54:36,848 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 16:54:36,849 - TradingBot - INFO - --- Trading Cycle 2025-04-13T15:54:36+00:00 ---
2025-04-13 16:54:37,161 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 16:54:37,161 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 16:54:37,161 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 16:54:37,161 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 16:54:37,161 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 16:54:37,162 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 16:54:37,162 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 16:54:37,162 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 16:54:37,163 - TradingBot - INFO - Starting pair selection process...
2025-04-13 16:54:37,163 - TradingBot - INFO - DEBUGGING: Found 11 available pairs in config:
2025-04-13 16:54:37,163 - TradingBot - INFO -   - CS.D.EURUSD.MINI.IP: {'description': 'Euro/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:54:37,163 - TradingBot - INFO -   - CS.D.USDJPY.MINI.IP: {'description': 'US Dollar/Japanese Yen', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:54:37,163 - TradingBot - INFO -   - CS.D.GBPUSD.MINI.IP: {'description': 'British Pound/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:54:37,163 - TradingBot - INFO -   - CS.D.AUDUSD.MINI.IP: {'description': 'Australian Dollar/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:54:37,163 - TradingBot - INFO -   - CS.D.USDCAD.MINI.IP: {'description': 'US Dollar/Canadian Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:54:37,163 - TradingBot - INFO -   - ... and 6 more
2025-04-13 16:54:37,163 - TradingBot - INFO - DEBUGGING: Current UTC hour is 15
2025-04-13 16:54:37,163 - TradingBot - INFO - DEBUGGING: Found 3 trading sessions in config:
2025-04-13 16:54:37,163 - TradingBot - INFO -   - ASIAN: Hours 0-8, Active: False, Pairs: 3
2025-04-13 16:54:37,163 - TradingBot - INFO -     Sample pairs: CS.D.USDJPY.MINI.IP, CS.D.AUDJPY.MINI.IP, CS.D.EURJPY.MINI.IP
2025-04-13 16:54:37,163 - TradingBot - INFO -   - EUROPEAN: Hours 7-16, Active: True, Pairs: 4
2025-04-13 16:54:37,163 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.EURGBP.MINI.IP
2025-04-13 16:54:37,163 - TradingBot - INFO -   - AMERICAN: Hours 12-21, Active: True, Pairs: 3
2025-04-13 16:54:37,164 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.USDCAD.MINI.IP
2025-04-13 16:54:37,164 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:37,442 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:37,669 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:37,671 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:37,672 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:37,853 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:37,977 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:37,978 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:37,979 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:37,980 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:38,168 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:38,170 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:38,292 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:38,294 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:54:38,295 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:38,296 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:38,496 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:38,498 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:38,627 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:38,628 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:38,630 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:54:38,630 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:54:38,631 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:54:38,633 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:38,861 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:38,986 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:38,987 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:38,989 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:39,251 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:39,359 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:39,361 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:39,362 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:39,362 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:39,632 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:39,635 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:39,755 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:39,757 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:54:39,758 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:39,759 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:39,970 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:39,972 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:40,089 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:40,091 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:40,092 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:54:40,093 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:54:40,093 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:54:40,094 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:40,302 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:40,418 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:40,420 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:40,421 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:40,607 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:40,728 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:40,729 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:40,730 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:40,730 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:41,365 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:41,368 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:41,495 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:41,496 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:54:41,498 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:41,498 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:41,701 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:41,703 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:41,827 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:41,828 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:41,829 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:54:41,829 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:54:41,829 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:54:41,830 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:42,027 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:42,153 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:42,155 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:54:42,155 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:54:42,156 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:42,362 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:42,488 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:42,489 - TradingBot - INFO - Selected 5 pairs for analysis:
2025-04-13 16:54:42,490 - TradingBot - INFO -   CS.D.GBPUSD.MINI.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 16:54:42,490 - TradingBot - INFO -   IX.D.FTSE.DAILY.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 16:54:42,491 - TradingBot - INFO -   CS.D.EURUSD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 16:54:42,491 - TradingBot - INFO -   CS.D.USDCAD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 16:54:42,492 - TradingBot - INFO -   CS.D.EURGBP.MINI.IP: Score=0.25, Setup=0.00, Trend=0.50, Perf=0.50, Vol=0.50
2025-04-13 16:54:43,266 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:43,457 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:43,579 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:43,580 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:44,395 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:54:44,396 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:54:44,398 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:54:45,203 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:45,391 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:45,502 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:45,504 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:46,311 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:46,311 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:46,475 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:46,478 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:46,572 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:46,574 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:47,399 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:47,400 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:47,568 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:47,571 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:47,667 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:47,669 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:54:47,770 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:54:47,771 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:54:47,772 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:54:47,796 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:47,955 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:48,050 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:48,052 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:48,053 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:48,214 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:48,316 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:48,318 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:48,319 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:54:48,320 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:54:48,321 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:54:48,321 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:54:48,321 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:54:48,322 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:54:48,322 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:48,491 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:48,594 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:48,596 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:48,597 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:48,769 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:48,998 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:49,001 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:49,002 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:49,003 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:49,187 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:49,190 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:49,292 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:49,293 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:49,295 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:49,296 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:49,465 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:49,467 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:49,924 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:49,927 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:54:49,928 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:49,928 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:50,120 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:50,124 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:50,240 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:50,241 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:54:50,242 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:50,243 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:54:50,424 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:50,426 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:50,543 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:50,545 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:54:50,545 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 16:54:50,692 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:50,815 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:50,816 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 16:54:50,984 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:51,118 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:51,120 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 16:54:51,300 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:51,443 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:51,444 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:54:51,445 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:54:51,446 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:54:51,446 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:54:51,447 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:54:51,447 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:54:51,447 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 16:54:51,759 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:51,897 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:51,899 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 16:54:52,085 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:52,225 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:52,226 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 16:54:52,407 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:52,543 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:52,545 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:52,546 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 16:54:52,708 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:52,712 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:52,847 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:52,848 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:52,848 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 16:54:53,077 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:53,080 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:53,219 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:53,220 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:53,220 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 16:54:53,397 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:53,400 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:54:53,660 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:53,661 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:53,662 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 16:54:53,823 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:53,826 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:53,962 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:53,963 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:53,964 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 16:54:54,143 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:54,147 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:54,288 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:54,290 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:54,290 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 16:54:54,473 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:54:54,476 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:54:54,616 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:54:54,619 - TradingBot - ERROR - Missing key in prompt template:  "epic"
2025-04-13 16:54:54,620 - TradingBot - CRITICAL - Unhandled exception in main loop!
Traceback (most recent call last):
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 425, in generate_advanced_prompt
    prompt = template.format(**context_data)
KeyError: ' "epic"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\temp\claude\git\main.py", line 343, in run_trading_bot
    advanced_prompt, market_regime = llm_prompting.generate_advanced_prompt(
                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        portfolio, valid_snapshots, data_provider, risk_manager
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 430, in generate_advanced_prompt
    prompt = self._generate_generic_template().format(**context_data)
KeyError: '\n          "tradeActions"'
2025-04-13 16:54:54,629 - TradingBot - ERROR - Error: '\n          "tradeActions"'
2025-04-13 16:54:54,629 - TradingBot - ERROR - Pausing 30s before retry.
2025-04-13 16:55:24,630 - TradingBot - INFO - Cycle ended (Duration: 47.78s). Sleeping 132.22s...
2025-04-13 16:57:36,851 - TradingBot - INFO - --- Trading Cycle 2025-04-13T15:57:36+00:00 ---
2025-04-13 16:57:37,105 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 16:57:37,105 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 16:57:37,106 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 16:57:37,106 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 16:57:37,106 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 16:57:37,106 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 16:57:37,106 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 16:57:37,106 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 16:57:37,107 - TradingBot - INFO - Starting pair selection process...
2025-04-13 16:57:37,107 - TradingBot - INFO - DEBUGGING: Found 11 available pairs in config:
2025-04-13 16:57:37,107 - TradingBot - INFO -   - CS.D.EURUSD.MINI.IP: {'description': 'Euro/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:57:37,107 - TradingBot - INFO -   - CS.D.USDJPY.MINI.IP: {'description': 'US Dollar/Japanese Yen', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:57:37,107 - TradingBot - INFO -   - CS.D.GBPUSD.MINI.IP: {'description': 'British Pound/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:57:37,107 - TradingBot - INFO -   - CS.D.AUDUSD.MINI.IP: {'description': 'Australian Dollar/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:57:37,107 - TradingBot - INFO -   - CS.D.USDCAD.MINI.IP: {'description': 'US Dollar/Canadian Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 16:57:37,107 - TradingBot - INFO -   - ... and 6 more
2025-04-13 16:57:37,107 - TradingBot - INFO - DEBUGGING: Current UTC hour is 15
2025-04-13 16:57:37,107 - TradingBot - INFO - DEBUGGING: Found 3 trading sessions in config:
2025-04-13 16:57:37,107 - TradingBot - INFO -   - ASIAN: Hours 0-8, Active: False, Pairs: 3
2025-04-13 16:57:37,107 - TradingBot - INFO -     Sample pairs: CS.D.USDJPY.MINI.IP, CS.D.AUDJPY.MINI.IP, CS.D.EURJPY.MINI.IP
2025-04-13 16:57:37,107 - TradingBot - INFO -   - EUROPEAN: Hours 7-16, Active: True, Pairs: 4
2025-04-13 16:57:37,108 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.EURGBP.MINI.IP
2025-04-13 16:57:37,108 - TradingBot - INFO -   - AMERICAN: Hours 12-21, Active: True, Pairs: 3
2025-04-13 16:57:37,108 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.USDCAD.MINI.IP
2025-04-13 16:57:37,108 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:38,967 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:39,108 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:39,109 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:39,110 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:39,318 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:39,463 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:39,464 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:39,465 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:39,465 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:39,676 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:39,678 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:39,815 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:39,816 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:57:39,817 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:39,817 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:40,015 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:40,018 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:40,238 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:40,239 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:40,240 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:57:40,240 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:57:40,241 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:57:40,241 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:40,445 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:40,597 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:40,598 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:40,599 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:40,823 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:40,979 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:40,980 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:40,981 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:40,982 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:41,206 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:41,216 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:41,418 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:41,419 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:57:41,420 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:41,421 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:41,642 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:41,644 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:41,792 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:41,793 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:41,793 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:57:41,794 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:57:41,794 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:57:41,794 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:42,072 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:42,250 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:42,251 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:42,252 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:42,460 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:42,605 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:42,607 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:42,608 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:42,608 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:42,821 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:42,823 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:43,219 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:43,221 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:57:43,222 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:43,223 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:43,436 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:43,438 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:43,583 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:43,585 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:43,585 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:57:43,585 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:57:43,586 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:57:43,586 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:43,807 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:43,965 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:43,967 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:57:43,967 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:57:43,968 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:44,200 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:44,352 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:44,352 - TradingBot - INFO - Selected 5 pairs for analysis:
2025-04-13 16:57:44,353 - TradingBot - INFO -   CS.D.GBPUSD.MINI.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 16:57:44,353 - TradingBot - INFO -   IX.D.FTSE.DAILY.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 16:57:44,353 - TradingBot - INFO -   CS.D.EURUSD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 16:57:44,353 - TradingBot - INFO -   CS.D.USDCAD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 16:57:44,353 - TradingBot - INFO -   CS.D.EURGBP.MINI.IP: Score=0.25, Setup=0.00, Trend=0.50, Perf=0.50, Vol=0.50
2025-04-13 16:57:45,045 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:45,645 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:45,797 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:45,798 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:46,593 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:57:46,593 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:57:46,595 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:57:47,378 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:47,707 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:47,842 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:47,844 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:48,666 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:48,668 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:48,991 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:48,993 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:49,129 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:49,131 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:49,964 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:49,965 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:50,310 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:50,312 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:50,446 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:50,446 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:57:50,548 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:57:50,550 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:57:50,552 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:57:50,571 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:50,753 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:50,880 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:50,882 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:50,883 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:51,076 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:51,219 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:51,221 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:51,222 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:57:51,223 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:57:51,224 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:57:51,224 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:57:51,225 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:57:51,225 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 16:57:51,226 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:51,470 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:51,623 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:51,625 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:51,626 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:51,908 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:52,059 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:52,060 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:52,061 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:52,061 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:52,304 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:52,307 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:52,807 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:52,809 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:52,810 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:52,811 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:53,064 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:53,067 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:53,224 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:53,225 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 16:57:53,226 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:53,226 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:53,455 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:53,458 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:53,616 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:53,618 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:57:53,619 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:53,619 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 16:57:53,855 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:53,858 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:54,021 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:54,022 - TradingBot - WARNING - No historical data for CS.D.EURGBP.MINI.IP, can't calculate technicals.
2025-04-13 16:57:54,022 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 16:57:54,216 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:54,386 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:54,387 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 16:57:54,607 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:54,768 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:54,769 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 16:57:55,182 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:55,355 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:55,356 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:57:55,356 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:57:55,357 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:57:55,357 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:57:55,358 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 16:57:55,358 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 16:57:55,359 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 16:57:55,539 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:55,700 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:55,701 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 16:57:55,906 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:56,067 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:56,069 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 16:57:56,419 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:56,576 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:56,578 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:56,579 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 16:57:56,768 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:56,772 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:56,938 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:56,939 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:56,940 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 16:57:57,157 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:57,160 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:57,335 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:57,337 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:57,337 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 16:57:57,560 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:57,562 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 16:57:57,740 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:57,742 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:57,743 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 16:57:57,947 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:57,950 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:58,123 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:58,125 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:58,126 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 16:57:58,349 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:58,352 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:58,537 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:58,539 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:58,540 - TradingBot - INFO - Fetching Polygon history: C:EURGBP (CS.D.EURGBP.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 16:57:58,826 - TradingBot - ERROR - Polygon fetch error for C:EURGBP: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 16:57:58,828 - TradingBot - INFO - Inferred Polygon ticker C:EURGBP from CS.D.EURGBP.MINI.IP
2025-04-13 16:57:58,975 - TradingBot - ERROR - Error fetching quote for C:EURGBP: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 16:57:58,979 - TradingBot - ERROR - Missing key in prompt template:  "epic"
2025-04-13 16:57:58,979 - TradingBot - CRITICAL - Unhandled exception in main loop!
Traceback (most recent call last):
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 425, in generate_advanced_prompt
    prompt = template.format(**context_data)
KeyError: ' "epic"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\temp\claude\git\main.py", line 343, in run_trading_bot
    advanced_prompt, market_regime = llm_prompting.generate_advanced_prompt(
                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        portfolio, valid_snapshots, data_provider, risk_manager
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\temp\claude\git\advanced_llm_prompting.py", line 430, in generate_advanced_prompt
    prompt = self._generate_generic_template().format(**context_data)
KeyError: '\n          "tradeActions"'
2025-04-13 16:57:58,982 - TradingBot - ERROR - Error: '\n          "tradeActions"'
2025-04-13 16:57:58,982 - TradingBot - ERROR - Pausing 30s before retry.
2025-04-13 16:58:28,983 - TradingBot - INFO - Cycle ended (Duration: 52.13s). Sleeping 127.87s...
2025-04-13 17:00:36,853 - TradingBot - INFO - --- Trading Cycle 2025-04-13T16:00:36+00:00 ---
2025-04-13 17:00:37,094 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 17:00:37,094 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 17:00:37,094 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 17:00:37,094 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 17:00:37,094 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 17:00:37,095 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 17:00:37,095 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 17:00:37,095 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 17:00:37,095 - TradingBot - INFO - Starting pair selection process...
2025-04-13 17:00:37,095 - TradingBot - INFO - DEBUGGING: Found 11 available pairs in config:
2025-04-13 17:00:37,095 - TradingBot - INFO -   - CS.D.EURUSD.MINI.IP: {'description': 'Euro/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:00:37,095 - TradingBot - INFO -   - CS.D.USDJPY.MINI.IP: {'description': 'US Dollar/Japanese Yen', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:00:37,096 - TradingBot - INFO -   - CS.D.GBPUSD.MINI.IP: {'description': 'British Pound/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:00:37,096 - TradingBot - INFO -   - CS.D.AUDUSD.MINI.IP: {'description': 'Australian Dollar/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:00:37,096 - TradingBot - INFO -   - CS.D.USDCAD.MINI.IP: {'description': 'US Dollar/Canadian Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:00:37,096 - TradingBot - INFO -   - ... and 6 more
2025-04-13 17:00:37,096 - TradingBot - INFO - DEBUGGING: Current UTC hour is 16
2025-04-13 17:00:37,096 - TradingBot - INFO - DEBUGGING: Found 3 trading sessions in config:
2025-04-13 17:00:37,096 - TradingBot - INFO -   - ASIAN: Hours 0-8, Active: False, Pairs: 3
2025-04-13 17:00:37,096 - TradingBot - INFO -     Sample pairs: CS.D.USDJPY.MINI.IP, CS.D.AUDJPY.MINI.IP, CS.D.EURJPY.MINI.IP
2025-04-13 17:00:37,096 - TradingBot - INFO -   - EUROPEAN: Hours 7-16, Active: False, Pairs: 4
2025-04-13 17:00:37,096 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.EURGBP.MINI.IP
2025-04-13 17:00:37,096 - TradingBot - INFO -   - AMERICAN: Hours 12-21, Active: True, Pairs: 3
2025-04-13 17:00:37,097 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.USDCAD.MINI.IP
2025-04-13 17:00:37,097 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:39,181 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:39,295 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:39,296 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:39,296 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:39,296 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:39,831 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:39,834 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:39,929 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:39,931 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:39,932 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:40,100 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:40,194 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:40,195 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:40,196 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:40,358 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:40,462 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:40,463 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:40,463 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:40,464 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:40,635 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:40,637 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:40,756 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:40,758 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:40,759 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:40,958 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:41,093 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:41,094 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:41,096 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:41,297 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:41,435 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:41,436 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:41,437 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:41,437 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:41,644 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:41,647 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:41,777 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:41,778 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:41,779 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:41,981 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:42,128 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:42,129 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:42,130 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:42,328 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:42,467 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:42,468 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:42,468 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:42,679 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:42,684 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:43,879 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:43,881 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:44,430 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:44,577 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:44,579 - TradingBot - INFO - Selected 3 pairs for analysis:
2025-04-13 17:00:44,580 - TradingBot - INFO -   CS.D.GBPUSD.MINI.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 17:00:44,581 - TradingBot - INFO -   CS.D.USDCAD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 17:00:44,581 - TradingBot - INFO -   CS.D.EURUSD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 17:00:45,272 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:45,800 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:45,941 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:45,943 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:46,726 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:46,727 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:47,047 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:47,049 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:47,399 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:47,401 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:48,188 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:48,675 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:48,812 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:48,813 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:48,915 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 17:00:48,916 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 17:00:48,918 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 17:00:48,936 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:49,141 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:49,289 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:49,291 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:49,292 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:49,495 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:49,640 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:49,641 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:49,642 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:49,642 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:49,849 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:49,852 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:49,987 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:49,989 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:49,990 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:49,990 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:50,190 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:50,193 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:50,325 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:50,327 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:50,328 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:50,521 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:50,620 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:50,622 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:50,623 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:50,786 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:50,883 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:50,885 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:50,886 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 17:00:51,008 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:51,112 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:51,114 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 17:00:51,271 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:51,393 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:51,395 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 17:00:51,557 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:51,684 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:51,686 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:51,687 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 17:00:51,859 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:51,863 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:51,980 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:51,982 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:51,982 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 17:00:52,528 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:52,531 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:52,655 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:52,657 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:52,657 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 17:00:53,144 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:53,147 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:53,276 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:53,277 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 17:00:53,443 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:53,578 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:53,579 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 17:00:53,973 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:54,106 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:54,107 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 17:00:54,403 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:54,536 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:54,539 - TradingBot - INFO - Querying LLM for trade recommendations in unknown market...
2025-04-13 17:00:55,816 - TradingBot - INFO - Estimated token usage for gpt-4-turbo: 209
2025-04-13 17:00:58,462 - TradingBot - INFO - Actual token usage: 321 (Prompt: 286, Completion: 35)
2025-04-13 17:00:58,464 - TradingBot - INFO - LLM Recommends: 0 New, 0 Amend. Reasoning keys: []
2025-04-13 17:00:58,466 - TradingBot - INFO - Logged decision set decision_2025-04-13T16-00-58-465478+00-00 for later review
2025-04-13 17:00:58,466 - TradingBot - INFO - No LLM amendments to process.
2025-04-13 17:00:58,467 - TradingBot - INFO - No new LLM trade actions to process.
2025-04-13 17:00:58,467 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:59,039 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:59,183 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:59,184 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:59,184 - TradingBot - ERROR - Error storing market data: Object of type Decimal is not JSON serializable
2025-04-13 17:00:59,184 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:59,185 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:59,401 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:59,404 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:00:59,543 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:59,543 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:59,544 - TradingBot - ERROR - Error storing market data: Object of type Decimal is not JSON serializable
2025-04-13 17:00:59,544 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:00:59,759 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:00:59,913 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:00:59,914 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:00:59,914 - TradingBot - ERROR - Error storing market data: Object of type Decimal is not JSON serializable
2025-04-13 17:00:59,915 - TradingBot - INFO - Cycle ended (Duration: 23.06s). Sleeping 156.94s...
2025-04-13 17:03:36,854 - TradingBot - INFO - --- Trading Cycle 2025-04-13T16:03:36+00:00 ---
2025-04-13 17:03:37,109 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 17:03:37,109 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 17:03:37,110 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 17:03:37,110 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 17:03:37,110 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 17:03:37,110 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 17:03:37,110 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 17:03:37,111 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 17:03:37,111 - TradingBot - INFO - Starting pair selection process...
2025-04-13 17:03:37,111 - TradingBot - INFO - DEBUGGING: Found 11 available pairs in config:
2025-04-13 17:03:37,111 - TradingBot - INFO -   - CS.D.EURUSD.MINI.IP: {'description': 'Euro/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:03:37,111 - TradingBot - INFO -   - CS.D.USDJPY.MINI.IP: {'description': 'US Dollar/Japanese Yen', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:03:37,112 - TradingBot - INFO -   - CS.D.GBPUSD.MINI.IP: {'description': 'British Pound/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:03:37,112 - TradingBot - INFO -   - CS.D.AUDUSD.MINI.IP: {'description': 'Australian Dollar/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:03:37,112 - TradingBot - INFO -   - CS.D.USDCAD.MINI.IP: {'description': 'US Dollar/Canadian Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:03:37,112 - TradingBot - INFO -   - ... and 6 more
2025-04-13 17:03:37,112 - TradingBot - INFO - DEBUGGING: Current UTC hour is 16
2025-04-13 17:03:37,112 - TradingBot - INFO - DEBUGGING: Found 3 trading sessions in config:
2025-04-13 17:03:37,112 - TradingBot - INFO -   - ASIAN: Hours 0-8, Active: False, Pairs: 3
2025-04-13 17:03:37,112 - TradingBot - INFO -     Sample pairs: CS.D.USDJPY.MINI.IP, CS.D.AUDJPY.MINI.IP, CS.D.EURJPY.MINI.IP
2025-04-13 17:03:37,112 - TradingBot - INFO -   - EUROPEAN: Hours 7-16, Active: False, Pairs: 4
2025-04-13 17:03:37,112 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.EURGBP.MINI.IP
2025-04-13 17:03:37,112 - TradingBot - INFO -   - AMERICAN: Hours 12-21, Active: True, Pairs: 3
2025-04-13 17:03:37,112 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.USDCAD.MINI.IP
2025-04-13 17:03:37,112 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:38,726 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:38,894 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:38,895 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:38,895 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:38,896 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:39,121 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:39,124 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:39,281 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:39,282 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:39,283 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:39,549 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:39,695 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:39,696 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:39,696 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:40,216 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:40,331 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:40,333 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:40,334 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:40,335 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:40,857 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:40,860 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:40,998 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:41,000 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:41,000 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:41,220 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:41,371 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:41,373 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:41,373 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:41,802 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:41,964 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:41,965 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:41,966 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:41,967 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:42,179 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:42,181 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:42,322 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:42,324 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:42,325 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:42,541 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:42,680 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:42,681 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:42,682 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:42,881 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:43,035 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:43,037 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:43,037 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:43,217 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:43,220 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:43,343 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:43,344 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:43,540 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:43,762 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:43,764 - TradingBot - INFO - Selected 3 pairs for analysis:
2025-04-13 17:03:43,764 - TradingBot - INFO -   CS.D.GBPUSD.MINI.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 17:03:43,765 - TradingBot - INFO -   CS.D.USDCAD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 17:03:43,765 - TradingBot - INFO -   CS.D.EURUSD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 17:03:44,533 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:44,862 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:45,009 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:45,009 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:45,785 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:45,786 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:46,187 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:46,190 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:46,355 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:46,356 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:47,136 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:47,514 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:47,676 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:47,678 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:47,779 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 17:03:47,780 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 17:03:47,781 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 17:03:47,792 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:48,020 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:48,184 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:48,186 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:48,187 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:48,418 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:48,915 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:48,916 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:48,918 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:48,918 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:49,133 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:49,136 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:49,275 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:49,277 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:49,278 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:49,279 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:49,513 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:49,516 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:49,651 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:49,653 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:49,654 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:49,909 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:50,047 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:50,048 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:50,050 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:03:50,271 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:50,409 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:50,410 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:03:50,411 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 17:03:50,587 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:50,709 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:50,711 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 17:03:51,064 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:51,165 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:51,167 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 17:03:51,628 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:51,771 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:51,772 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:51,773 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 17:03:51,937 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:51,941 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:52,082 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:52,083 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:52,083 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 17:03:52,288 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:52,290 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:52,428 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:52,429 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:52,431 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 17:03:52,617 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:52,620 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:03:52,764 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:52,765 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 17:03:53,213 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:53,374 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:53,375 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 17:03:53,572 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:53,717 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:53,718 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 17:03:54,019 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:03:54,156 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:03:54,158 - TradingBot - INFO - Querying LLM for trade recommendations in unknown market...
2025-04-13 17:03:55,256 - TradingBot - INFO - Estimated token usage for gpt-4-turbo: 841
2025-04-13 17:04:03,920 - TradingBot - INFO - Actual token usage: 1518 (Prompt: 1194, Completion: 324)
2025-04-13 17:04:03,921 - TradingBot - INFO - LLM Recommends: 2 New, 2 Amend. Reasoning keys: ['CS.D.EURUSD.MINI.IP', 'CS.D.USDJPY.MINI.IP', 'CS.D.GBPUSD.MINI.IP', 'CS.D.AUDUSD.MINI.IP', 'global']
2025-04-13 17:04:03,935 - TradingBot - INFO - Logged decision set decision_2025-04-13T16-04-03-923398+00-00 for later review
2025-04-13 17:04:03,935 - TradingBot - INFO - Processing 2 LLM amendments...
2025-04-13 17:04:03,936 - TradingBot - WARNING - Cannot AMEND CS.D.GBPUSD.MINI.IP: No open position.
2025-04-13 17:04:03,937 - TradingBot - WARNING - Cannot CLOSE CS.D.AUDUSD.MINI.IP: No open position.
2025-04-13 17:04:03,937 - TradingBot - INFO - Processing 2 LLM new trade actions...
2025-04-13 17:04:05,357 - TradingBot - WARNING - Using hardcoded approx VPP for CS.D.EURUSD.MINI.IP: 0.8100 GBP
2025-04-13 17:04:05,359 - TradingBot - INFO - Advanced sizing for CS.D.EURUSD.MINI.IP BUY: Size=0.87 (Base risk: 2.0%, Final risk: 1.92000%, Est. risk amount: 10.57)
2025-04-13 17:04:05,360 - TradingBot - WARNING - Insufficient margin. Needed: 11355.94, Max Available: 368.81
2025-04-13 17:04:05,361 - TradingBot - WARNING - Trade for CS.D.EURUSD.MINI.IP rejected by constraints: Insufficient margin. Needed: 11355.94, Max Available: 368.81
2025-04-13 17:04:05,394 - TradingBot - INFO - Updated decision decision_2025-04-13T16-04-03-923398+00-00 with execution result for CS.D.EURUSD.MINI.IP
2025-04-13 17:04:06,748 - TradingBot - WARNING - Using hardcoded approx VPP for CS.D.USDJPY.MINI.IP: 0.7400 GBP
2025-04-13 17:04:06,750 - TradingBot - INFO - Advanced sizing for CS.D.USDJPY.MINI.IP SELL: Size=0.60 (Base risk: 2.0%, Final risk: 1.60000%, Est. risk amount: 8.88)
2025-04-13 17:04:06,751 - TradingBot - WARNING - Insufficient margin. Needed: 5968.14, Max Available: 368.81
2025-04-13 17:04:06,751 - TradingBot - WARNING - Trade for CS.D.USDJPY.MINI.IP rejected by constraints: Insufficient margin. Needed: 5968.14, Max Available: 368.81
2025-04-13 17:04:06,772 - TradingBot - INFO - Updated decision decision_2025-04-13T16-04-03-923398+00-00 with execution result for CS.D.USDJPY.MINI.IP
2025-04-13 17:04:06,773 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:04:07,086 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:04:07,223 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:04:07,224 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:04:07,225 - TradingBot - ERROR - Error storing market data: Object of type Decimal is not JSON serializable
2025-04-13 17:04:07,225 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:04:07,226 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:04:07,433 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:04:07,436 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:04:07,574 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:04:07,575 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:04:07,576 - TradingBot - ERROR - Error storing market data: Object of type Decimal is not JSON serializable
2025-04-13 17:04:07,577 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:04:07,966 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:04:08,109 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:04:08,110 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:04:08,110 - TradingBot - ERROR - Error storing market data: Object of type Decimal is not JSON serializable
2025-04-13 17:04:08,110 - TradingBot - INFO - Cycle ended (Duration: 31.26s). Sleeping 148.74s...
2025-04-13 17:06:25,787 - TradingBot - INFO - ----- Logging configured for TradingBot (Level: INFO) -----
2025-04-13 17:06:25,787 - TradingBot - INFO - ðŸš€ Initializing Enhanced Forex AI Trader PID: 28616
2025-04-13 17:06:25,788 - TradingBot - INFO - Connecting to IG as connormilton (LIVE)...
2025-04-13 17:06:26,056 - TradingBot - INFO - Setting default IG account ID: INRKZ
2025-04-13 17:06:26,179 - TradingBot - INFO - Account already active, continuing without switching.
2025-04-13 17:06:26,180 - TradingBot - INFO - IG connection successful.
2025-04-13 17:06:26,180 - TradingBot - INFO - Initializing Polygon client with key starting with: 1O0r...
2025-04-13 17:06:26,181 - TradingBot - INFO - Polygon.io client initialized successfully
2025-04-13 17:06:26,847 - TradingBot - INFO - Polygon connection test successful. Got quote for C:EURUSD: Ask=1.13642, Bid=1.13492
2025-04-13 17:06:26,850 - TradingBot - INFO - Trade memory database initialized at data/trading_memory.db
2025-04-13 17:06:26,852 - TradingBot - INFO - OpenAI setup completed.
2025-04-13 17:06:27,228 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 17:06:27,228 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 17:06:27,228 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 17:06:27,228 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 17:06:27,228 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 17:06:27,229 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 17:06:27,229 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 17:06:27,229 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 17:06:27,230 - TradingBot - INFO - --- Trading Cycle 2025-04-13T16:06:27+00:00 ---
2025-04-13 17:06:27,485 - TradingBot - INFO - Fetched 2 open positions.
2025-04-13 17:06:27,485 - TradingBot - INFO - Portfolio Updated: Balance=555.52, Available=409.79, Open Positions=2
2025-04-13 17:06:27,485 - TradingBot - WARNING - Could not determine VPP for CS.D.USCGC.TODAY.IP, using default of 1.0
2025-04-13 17:06:27,486 - TradingBot - WARNING - Position CS.D.USCGC.TODAY.IP has negative or zero points at risk. Risk calculation skipped.
2025-04-13 17:06:27,486 - TradingBot - WARNING - Could not determine VPP for IX.D.FTSE.DAILY.IP, using default of 1.0
2025-04-13 17:06:27,486 - TradingBot - INFO - Current open risk: 0.59 (0.11% of account)
2025-04-13 17:06:27,486 - TradingBot - INFO - Risk manager updated: Balance=555.52, Risk Exposure=0.11%
2025-04-13 17:06:27,486 - TradingBot - INFO - Performance multiplier updated: 0.8 (Win Rate: 0.00, Profit Factor: 0.00)
2025-04-13 17:06:27,487 - TradingBot - INFO - Starting pair selection process...
2025-04-13 17:06:27,487 - TradingBot - INFO - DEBUGGING: Found 11 available pairs in config:
2025-04-13 17:06:27,487 - TradingBot - INFO -   - CS.D.EURUSD.MINI.IP: {'description': 'Euro/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:06:27,487 - TradingBot - INFO -   - CS.D.USDJPY.MINI.IP: {'description': 'US Dollar/Japanese Yen', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:06:27,487 - TradingBot - INFO -   - CS.D.GBPUSD.MINI.IP: {'description': 'British Pound/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:06:27,487 - TradingBot - INFO -   - CS.D.AUDUSD.MINI.IP: {'description': 'Australian Dollar/US Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:06:27,487 - TradingBot - INFO -   - CS.D.USDCAD.MINI.IP: {'description': 'US Dollar/Canadian Dollar', 'category': 'forex', 'group': 'majors'}
2025-04-13 17:06:27,487 - TradingBot - INFO -   - ... and 6 more
2025-04-13 17:06:27,487 - TradingBot - INFO - DEBUGGING: Current UTC hour is 16
2025-04-13 17:06:27,488 - TradingBot - INFO - DEBUGGING: Found 3 trading sessions in config:
2025-04-13 17:06:27,488 - TradingBot - INFO -   - ASIAN: Hours 0-8, Active: False, Pairs: 3
2025-04-13 17:06:27,488 - TradingBot - INFO -     Sample pairs: CS.D.USDJPY.MINI.IP, CS.D.AUDJPY.MINI.IP, CS.D.EURJPY.MINI.IP
2025-04-13 17:06:27,488 - TradingBot - INFO -   - EUROPEAN: Hours 7-16, Active: False, Pairs: 4
2025-04-13 17:06:27,488 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.EURGBP.MINI.IP
2025-04-13 17:06:27,488 - TradingBot - INFO -   - AMERICAN: Hours 12-21, Active: True, Pairs: 3
2025-04-13 17:06:27,488 - TradingBot - INFO -     Sample pairs: CS.D.EURUSD.MINI.IP, CS.D.GBPUSD.MINI.IP, CS.D.USDCAD.MINI.IP
2025-04-13 17:06:27,488 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:27,830 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:28,098 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:28,100 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:28,101 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:28,321 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:28,477 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:28,479 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:28,480 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:28,481 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:28,967 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:28,970 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:29,110 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:29,111 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:29,114 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:29,322 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:29,467 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:29,469 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:29,470 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:29,717 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:29,872 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:29,874 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:29,875 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:29,876 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:30,094 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:30,097 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:30,235 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:30,236 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:30,237 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:30,435 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:30,535 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:30,536 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:30,537 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:31,324 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:31,476 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:31,478 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:31,479 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:31,479 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:31,696 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:31,698 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:31,838 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:31,840 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:31,841 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:32,058 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:32,200 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:32,202 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:33,099 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:33,249 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:33,251 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:33,252 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:33,476 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:33,479 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:33,630 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:33,632 - TradingBot - INFO - Selected 3 pairs for analysis:
2025-04-13 17:06:33,632 - TradingBot - INFO -   CS.D.GBPUSD.MINI.IP: Score=0.35, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.50
2025-04-13 17:06:33,633 - TradingBot - INFO -   CS.D.EURUSD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 17:06:33,633 - TradingBot - INFO -   CS.D.USDCAD.MINI.IP: Score=0.30, Setup=0.00, Trend=0.50, Perf=0.50, Vol=1.00
2025-04-13 17:06:34,320 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:34,678 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:34,831 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:34,832 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:35,608 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:35,962 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:36,112 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:36,113 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:36,895 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:36,896 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:37,237 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:37,239 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:37,376 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:37,378 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:37,479 - TradingBot - WARNING - No Polygon ticker mapping for IG Epic: IX.D.FTSE.DAILY.IP
2025-04-13 17:06:37,480 - TradingBot - ERROR - Cannot fetch history for IX.D.FTSE.DAILY.IP: No mapping.
2025-04-13 17:06:37,482 - TradingBot - WARNING - No historical data for IX.D.FTSE.DAILY.IP, can't calculate technicals.
2025-04-13 17:06:37,503 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:37,713 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:37,854 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:37,856 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:37,857 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:38,071 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:38,214 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:38,215 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:38,215 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:38,438 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:38,584 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:38,586 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:38,587 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:38,800 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:38,944 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:38,945 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:38,946 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:38,947 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:39,172 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:39,175 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:39,330 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:39,332 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:39,334 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:39,335 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:39,567 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:39,569 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:40,015 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:40,017 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:40,019 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 17:06:40,308 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:40,524 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:40,526 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 17:06:40,754 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:40,918 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:40,920 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 17:06:41,197 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:41,325 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:41,327 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 17:06:41,496 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:41,658 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:41,660 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 17:06:41,879 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:42,060 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:42,062 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 17:06:42,279 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:42,451 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:42,453 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:42,453 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-01-13 to 2025-04-13], TF: day
2025-04-13 17:06:42,649 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:42,653 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:42,818 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:42,819 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:42,819 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-30 to 2025-04-13], TF: hour
2025-04-13 17:06:43,029 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:43,031 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:43,196 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:43,198 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:43,198 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-04-11 to 2025-04-13], TF: minute
2025-04-13 17:06:43,397 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:43,400 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:43,558 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:43,561 - TradingBot - INFO - Querying LLM for trade recommendations in unknown market...
2025-04-13 17:06:44,864 - TradingBot - INFO - Estimated token usage for gpt-4-turbo: 841
2025-04-13 17:06:52,626 - TradingBot - INFO - Actual token usage: 1543 (Prompt: 1194, Completion: 349)
2025-04-13 17:06:52,628 - TradingBot - INFO - LLM Recommends: 2 New, 2 Amend. Reasoning keys: ['CS.D.EURUSD.MINI.IP', 'CS.D.USDJPY.MINI.IP', 'CS.D.GBPUSD.MINI.IP', 'CS.D.AUDUSD.MINI.IP', 'global']
2025-04-13 17:06:52,632 - TradingBot - INFO - Logged decision set decision_2025-04-13T16-06-52-629408+00-00 for later review
2025-04-13 17:06:52,632 - TradingBot - INFO - Processing 2 LLM amendments...
2025-04-13 17:06:52,633 - TradingBot - WARNING - Cannot AMEND CS.D.GBPUSD.MINI.IP: No open position.
2025-04-13 17:06:52,634 - TradingBot - WARNING - Cannot CLOSE CS.D.AUDUSD.MINI.IP: No open position.
2025-04-13 17:06:52,634 - TradingBot - INFO - Processing 2 LLM new trade actions...
2025-04-13 17:06:53,960 - TradingBot - WARNING - Using hardcoded approx VPP for CS.D.EURUSD.MINI.IP: 0.8100 GBP
2025-04-13 17:06:53,961 - TradingBot - INFO - Advanced sizing for CS.D.EURUSD.MINI.IP BUY: Size=0.65 (Base risk: 2.0%, Final risk: 1.92000%, Est. risk amount: 10.53)
2025-04-13 17:06:53,962 - TradingBot - WARNING - Insufficient margin. Needed: 8484.32, Max Available: 368.81
2025-04-13 17:06:53,963 - TradingBot - WARNING - Trade for CS.D.EURUSD.MINI.IP rejected by constraints: Insufficient margin. Needed: 8484.32, Max Available: 368.81
2025-04-13 17:06:53,990 - TradingBot - INFO - Updated decision decision_2025-04-13T16-06-52-629408+00-00 with execution result for CS.D.EURUSD.MINI.IP
2025-04-13 17:06:55,330 - TradingBot - WARNING - Using hardcoded approx VPP for CS.D.USDJPY.MINI.IP: 0.7400 GBP
2025-04-13 17:06:55,333 - TradingBot - INFO - Advanced sizing for CS.D.USDJPY.MINI.IP SELL: Size=1.20 (Base risk: 2.0%, Final risk: 1.60000%, Est. risk amount: 8.88)
2025-04-13 17:06:55,335 - TradingBot - WARNING - Insufficient margin. Needed: 11936.28, Max Available: 368.81
2025-04-13 17:06:55,336 - TradingBot - WARNING - Trade for CS.D.USDJPY.MINI.IP rejected by constraints: Insufficient margin. Needed: 11936.28, Max Available: 368.81
2025-04-13 17:06:55,360 - TradingBot - INFO - Updated decision decision_2025-04-13T16-06-52-629408+00-00 with execution result for CS.D.USDJPY.MINI.IP
2025-04-13 17:06:55,361 - TradingBot - INFO - Fetching Polygon history: C:GBPUSD (CS.D.GBPUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:55,673 - TradingBot - ERROR - Polygon fetch error for C:GBPUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:55,860 - TradingBot - ERROR - Error fetching quote for C:GBPUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:55,861 - TradingBot - WARNING - No historical data for CS.D.GBPUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:55,862 - TradingBot - ERROR - Error storing market data: Object of type Decimal is not JSON serializable
2025-04-13 17:06:55,863 - TradingBot - INFO - Fetching Polygon history: C:EURUSD (CS.D.EURUSD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:56,200 - TradingBot - ERROR - Polygon fetch error for C:EURUSD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:56,384 - TradingBot - ERROR - Error fetching quote for C:EURUSD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:56,385 - TradingBot - WARNING - No historical data for CS.D.EURUSD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:56,386 - TradingBot - ERROR - Error storing market data: Object of type Decimal is not JSON serializable
2025-04-13 17:06:56,387 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:56,387 - TradingBot - INFO - Fetching Polygon history: C:USDCAD (CS.D.USDCAD.MINI.IP) [2025-03-14 to 2025-04-13], TF: hour
2025-04-13 17:06:56,632 - TradingBot - ERROR - Polygon fetch error for C:USDCAD: 'Timestamp'
Traceback (most recent call last):
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\temp\claude\git\data_provider.py", line 221, in get_historical_data_polygon
    df['Timestamp'] = pd.to_datetime(df['Timestamp'], unit='ms', utc=True)
                                     ~~^^^^^^^^^^^^^
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\temp\claude\git\venv\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Timestamp'
2025-04-13 17:06:56,634 - TradingBot - INFO - Inferred Polygon ticker C:USDCAD from CS.D.USDCAD.MINI.IP
2025-04-13 17:06:56,811 - TradingBot - ERROR - Error fetching quote for C:USDCAD: 'LastQuote' object has no attribute 'timestamp'
2025-04-13 17:06:56,812 - TradingBot - WARNING - No historical data for CS.D.USDCAD.MINI.IP, can't calculate technicals.
2025-04-13 17:06:56,814 - TradingBot - ERROR - Error storing market data: Object of type Decimal is not JSON serializable
2025-04-13 17:06:56,815 - TradingBot - INFO - Cycle ended (Duration: 29.59s). Sleeping 150.41s...
